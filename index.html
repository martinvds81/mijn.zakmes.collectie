<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mijn zakmes collectie</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #e0f7fa;
            margin: 0;
            padding: 20px;
            font-family: 'Montserrat', sans-serif;
            /* background: linear-gradient(120deg, #f5f7fa, #c3cfe2); */
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            width: 100%;
            box-sizing: border-box; /* Voorkomt dat margins/paddings invloed hebben */
            padding: 0 10px; /* Zorgt voor symmetrische padding aan beide kanten */
        }

        .card {
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            overflow: hidden;
            width: calc(33.33% - 20px);
            display: flex;
            flex-direction: column;
        }

        .card img {
            width: 200px !important;
            height: 150px !important;
            object-fit: scale-down;
            margin-top: 30px;
        }

        .card-content {
            padding: 15px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            font-size: 14px;
        }

        .specs {
            display: flex;
            flex-direction: column;
        }

        .specs div {
            margin-bottom: 5px;
        }

        .row {
            display: flex;
            align-items: center;
        }

        .left, .topleft {
            width: 63%;
            margin-left: 10px;
        }

        .right {
            width: 37%;
        }

        .topright {
            width: 100px;
            height: 75px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-sort-container, .header1 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin: 0px;
        }

        .search-bar {
            display: flex;
            flex: 1;
        }

        .search-bar input {
            padding: 10px;
            border: 1px solid #00796b;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.4s ease;
            margin: 10px;
            width: 250px;
        }

        .sort-options {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sort-options select {
            padding: 10px;
            border: 1px solid #00796b;
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.4s ease;
            background-color: #ffffff;
            color: #0288d1;
        }

        .sort-options select:hover {
            border-color: #004d40;
            background-color: #e0f2f1;
        }

        .sort-options select:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(0, 121, 107, 0.5);
        }

        h1 {
            color: #0288d1;
            text-align: center;
            font-size: 30px;
            letter-spacing: 4px; /* Maakt de tekst luchtiger */
            font-weight: 300; /* Lichtere tekst */
        }

        h2 {
            font-size: 20px;
            text-shadow: 2px 2px 10px white;
        }

        strong {
            color: #0288d1;
        }

        .link-image {
            position: relative;
            display: inline-block;
            cursor: pointer;
            transition: transform 0.4s ease;
            background-color: transparent;
            mix-blend-mode: multiply;
            transform-origin: right top;
        }

        .link-image:hover {
            transform: scale(2.0) translateY(-35px) translateX(15px);
        }

        .rotated-image {
            transform: rotate(50deg);
        }

        button {
            background: transparent;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #999;
            transition: color 0.4s ease;
        }

        button:hover {
            color: #333;
        }
    </style>
    <script>
        let knifeData = []; // Global variable to store loaded knife data

        const data = {
            "knives": [
                {
                    "brand": "Kunwu Knives",
                    "model": "Compadre",
                    "product_url": "https://www.lamnia.com/nl/p/103263/messen/kunwu-knives-reverse-tux-compadre-diamond-texture-ti-dlc-vouwmes",
                    "image": {
                        "src": "https://cdn11.bigcommerce.com/s-fedcb/images/stencil/640w/products/30527/105951/Kunwu_K706C-T401__22709.1.jpg",
                        "alt": "Compadre"
                    },
                    "specifications": {
                        "handle_material": "Reverse Tux Diamond Texture Titanium",
                        "blade_shape": "Clippoint",
                        "finish": "Satin DLC",
                        "opening_method": "Thumb hole",
                        "lock_type": "Frame lock",
                        "weight": "111 g",
                        "purchase_date": "2025-03-24",
                        "steel_type": "Vanax",
                        "hardness": "60-62 HRC",
                        "closed_length": "11.2 cm",
                        "open_length": "18.0 cm",
                        "blade_length": "7.5 cm",
                        "new_price": "€ 313.35",
                        "purchase_price": "€ 313.35"
                    }
                },
                {
                    "brand": "Civivi",
                    "model": "Altus C20076-6",
                    "product_url": "https://www.knivesandtools.nl/nl/pt/-civivi-altus-c20076-6-stonewashed-aluminium-blue-zakmes.htm",
                    "image": {
                        "src": "https://assets.katogroup.eu/i/katogroup/CIC20076-6_01_civivi?%24product-image%24=&fmt=auto&h=868&w=1304",
                        "alt": "Altus"
                    },
                    "specifications": {
                        "variant": "Blue Stonewashed Aluminium",
                        "blade_shape": "Droppoint",
                        "finish": "Stonewashed",
                        "open_method": "Duimsteun",
                        "lock_type": "Buttonlock",
                        "weight": "96 g",
                        "steel_type": "Nitro-V",
                        "hardness": "61 HRC",
                        "closed_length": "10.5 cm",
                        "open_length": "18 cm",
                        "blade_length": "7.5 cm",
                        "new_price": "€ 95,95",
                        "purchase_price": "€ 94,95",
                        "purchase_date": "29-05-2024",
                        "modifications": {
                            "description": "Unlocked Composites carbon scales",
                            "mod_url": "https://unlockedcomposites.com"
                        }
                    }
                }
            ]
        };

        // Function to load JSON data
        function loadKnifeData() {
            knifeData = data.knives; // Store data globally
            renderKnives(knifeData);
            updateTotals(knifeData);
        }

        // Function to search knives
        function searchKnives() {
            const query = document.getElementById("search").value.toLowerCase();
            const filteredKnives = knifeData.filter(knife =>
                knife.brand.toLowerCase().includes(query) ||
                knife.model.toLowerCase().includes(query) ||
                knife.specifications.blade_shape.toLowerCase().includes(query) ||
                knife.specifications.steel_type.toLowerCase().includes(query)
            );
            
            renderKnives(filteredKnives);
            updateTotals(filteredKnives);
        }

        // Function to clear search
        function clearSearch() {
            document.getElementById("search").value = "";
            renderKnives(knifeData);
            updateTotals(knifeData);
        }

        // Function to sort knives
        function sortKnives() {

          

            const sortBy = document.getElementById("sort").value;
            const sortOrder = document.getElementById("sortOrder").value;
            
            const sortedKnives = [...knifeData].sort((a, b) => {
                const valueA = getValue(a, sortBy);
                const valueB = getValue(b, sortBy);

                if (typeof valueA === "number" && typeof valueB === "number") {
                    return sortOrder === "asc" ? valueA - valueB : valueB - valueA;
                } else {
                    return sortOrder === "asc" ? valueA.localeCompare(valueB) : valueB.localeCompare(valueA);
                }
            });

            console.log(sortedKnives);

            renderKnives(sortedKnives);
        }

        // Helper function to get values for sorting
        function getValue(knife, key) {
            return knife.specifications[key] || knife[key] || "";
        }

        // Function to update total values
        function updateTotals(knives) {
            document.getElementById("totalKnives").innerHTML = `Total Knives: ${knives.length}`;
            
            const totalNewValue = knives.reduce((sum, knife) => sum + parseFloat(knife.specifications.new_price.replace("€ ", "").replace(",", ".")), 0);
            const totalPurchaseValue = knives.reduce((sum, knife) => sum + parseFloat(knife.specifications.purchase_price.replace("€ ", "").replace(",", ".")), 0);
            
            document.getElementById("totalValue").innerHTML = `Total New Value: € ${totalNewValue.toFixed(2)}`;
            document.getElementById("totalPurchaseValue").innerHTML = `Total Purchase Value: € ${totalPurchaseValue.toFixed(2)}`;

            // Last modified time
            document.getElementById("lastModified").innerHTML = `Last Modified: ${new Date().toLocaleString()}`;
        }

        // Function to load JSON data
        function renderKnives(knives) {
            const container = document.getElementById("knives-container");
            container.innerHTML = ""; 

            // Loop through all knives and create HTML dynamically
            knives.forEach(knife => {
                const card = document.createElement("div");
                card.classList.add("card");

                card.innerHTML = `
                    <div class="card-content">
                        <div class="specs">
                            <div class="row">
                                <div class="topleft">
                                    <h2>${knife.brand} ${knife.model}</h2>
                                </div>
                                <div class="topright">
                                    <a href="${knife.product_url}" target="_blank">
                                        <img src="${knife.image.src}" class="rotated-image" alt="${knife.image.alt}">
                                    </a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="left">
                                    <div><strong>Handle Material:</strong><br>${knife.specifications.handle_material}</div>
                                    <div><strong>Blade Shape:</strong><br>${knife.specifications.blade_shape}</div>
                                    <div><strong>Finish:</strong><br>${knife.specifications.finish}</div>
                                    <div><strong>Opening Method:</strong><br>${knife.specifications.opening_method}</div>
                                    <div><strong>Lock Type:</strong><br>${knife.specifications.lock_type}</div>
                                    <div><strong>Weight:</strong><br>${knife.specifications.weight}</div>
                                    <div><strong>Purchase Date:</strong><br>${knife.specifications.purchase_date}</div>
                                </div>
                                <div class="right">
                                    <div><strong>Steel Type:</strong><br>${knife.specifications.steel_type}</div>
                                    <div><strong>Hardness:</strong><br>${knife.specifications.hardness}</div>
                                    <div><strong>Closed Length:</strong><br>${knife.specifications.closed_length}</div>
                                    <div><strong>Open Length:</strong><br>${knife.specifications.open_length}</div>
                                    <div><strong>Blade Length:</strong><br>${knife.specifications.blade_length}</div>
                                    <div><strong>New Price:</strong><br>${knife.specifications.new_price}</div>
                                    <div><strong>Purchase Price:</strong><br>${knife.specifications.purchase_price}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }
        
        // Load data when page is loaded
        window.onload = loadKnifeData;
    </script>
</head>
<body>
    <div class="header1"><h1>Mijn zakmes collectie</h1>
        <div id="totalKnives"></div>
        <div id="totalValue"></div>
        <div id="totalPurchaseValue"></div>
        <div id="lastModified"></div>
    </div>
    <div class="search-sort-container">
        <div class="search-bar">
            <input type="text" id="search" onkeyup="searchKnives()" placeholder="Zoeken..."><button id="clear-btn" onclick="clearSearch()">✕</button>
        </div>
        <div class="sort-options">Sorteren op:&nbsp;
            <select id="sort" onchange="sortKnives()">
                <option value="brand">Merk</option>
                <option value="model">Naam</option>
                <option value="blade_shape">Lemmet vorm</option>
                <option value="steel_type">Staalsoort</option>
                <option value="hardness">Hardheid</option>
                <option value="finish">Afwerking</option>
                <option value="open_method">Openmethode</option>
                <option value="lock_type">Vergrendeling</option>
                <option value="closed_length">Lengte gesloten</option>
                <option value="open_length">Lengte geopend</option>
                <option value="blade_length">Lengte lemmet</option>
                <option value="weight">Gewicht</option>
                <option value="new_price">Nieuwwaarde</option>
                <option value="purchase_price">Aankoopwaarde</option>
                <option value="purchase_date">Aankoopdatum</option>
            </select>
            <select id="sortOrder" onchange="sortKnives()">
                <option value="asc">Oplopend</option>
                <option value="desc">Aflopend</option>
            </select>
        </div>
        <div id="totalKnives"></div>
        <div id="totalValue"></div>
        <div id="totalPurchaseValue"></div>
        <div id="lastModified"></div>
    </div>
    <div id="knives-container" class="container">
    </div>
    </div>
        
</body>
</html>